---
title: "HLC"
author: "Práctica 4: Clonación, plantillas y snapshots en Proxmox"
output: 
  beamer_presentation:
    
    includes:
      in_header: 
        - "../include/header_proxmox.tex"
    slide_level: 2
    #toc: true
    keep_tex:  true
    
classoption: "aspectratio=169"
---

# Práctica 4

## Clonación

* Lo habitual al crear una máquina virtual es hacerlo a partir de una **imagen ISO**. 
* La **clonación y las plantillas** nos permiten la **creación rápida** de máquinas virtuales del mismo tipo.
* La clonación nos permite crear **una nueva máquina** a partir de de otra máquina (**se hace una copia del disco**).
* La nueva máquina es **igual que la original**, pero podremos cambiarles sus características (hostname, memoria, ...).

## Clonación

\centering
![ ](img/clonar.png){height=70%}

## Plantilla

* Otra manera de crear rápidamente nuevas máquinas virtuales es usar una **plantilla** para su creación.
* Si partimos de una máquina que ya tenemos configurada, la podemos convertir en una **plantilla** y a partir de ella crear **nuevas máquinas**.
* Las plantillas son de **solo lectura** por lo que ya no podremos usar de nuevo la máquina original. 
* Si creamos una nueva máquina a partir de una plantilla, está ocupará muy poco almacenamiento en disco.
* Esto se consigue haciendo una **Clonación con Vinculación** desde la plantilla.
* El disco de la nueva máquina virtual estará vinculado al disco de la plantilla de la que procede. **Estaremos ahorrando espacio de almacenamiento**.

## Plantilla

\centering
![ ](img/plantilla.png){height=70%}


## Snapshot

* Un **snapshot (instantánea)** nos posibilita guardar el estado de una máquina virtual en un determinado momento.
* De esta forma en el futuro puedo volver a un estado anterior de la misma.
* Si elegimos un snapshot podremos borrarlo (**Eliminar****), modificar su información (**Editar**) y, lo más importante, hacer que la máquina virtual vuelva al estado en la que se tomó el snapshot con la opción **Revertir**.

## Snapshot

\centering
![ ](img/snapshot.png){height=70%}

## Plantillas predefinidas

* Tenemos acceso a un **Conjunto de Recurso** llamado **Imágenes** donde los profesores pueden poner **plantillas** para crear nuevas máquinas.
* En un principio hay 3: **Debian 12, Ubuntu 22.04 y Windows Server 2019**.
* **¡¡¡Tenemos un problema!!!**: Si podemos crear una nueva máquina virtual desde las plantillas de **Imágenes**, 
  * **¿Qué usuario/contraseña tienen?**
  * **¿Todas esas máquinas tienen las mimas contraseñas?**

\centering
![ ](img/imagenes.png){height=30%}

## Creando nuevas máquinas virtuales a partir de las plantillas Imágenes

* Si creamos una nueva máquina virtual desde la plantilla **Windows Server 2019**, cuando iniciamos la máquina tendremos que indicar **una nueva contraseña**.
* Si creamos una nueva ,máquina virtual desde las plantillas Linux, vamos a usar el mecańimos de **Cloud-Init** para indicar **usuario/contraseña**.
* Si algún profesor sube alguna plantilla nueva, os **tendrá que informar del usuario/contrseña**.

## Configuración de nuevas máquinas Linux usando Cloud-Init

* Si creamos una nueva MV a partir de la plantillas **debian12-cloud** o **ubuntu2204-cloud** no sabremos qué usuario y contraseña tiene.
* **Antes de iniciar la nueva máquina**, podemos configurar en el apartado **Cloud-Init**:
  * El usuario (por defecto es **usuario**).
  * La contraseña.
  * Podemos además indicar nuestra clave SSH pública, para que podamos acceder a la máquina por SSH sin indicar la contraseña.

\centering
![ ](img/cloud-init.png){height=35%}

# Práctica 4

## ¿Qué tienes que hacer?


1. 

## ¿Qué tienes que entregar?

1. 

